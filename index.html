<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>顧客滿意度問卷</title>
<script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
<style>
/* --- 全域樣式 --- */
:root{
--bg:#f6f7fb;
--card:#ffffff;
--accent:#0057b8;
--muted:#667085;
--success:#0f9d58;
--radius:14px;
--glass: rgba(255,255,255,0.75);
font-family: "Noto Sans TC", "Microsoft JhengHei", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}


html,body{
height:100%;
margin:0;
background: linear-gradient(180deg, #eef2ff 0%, var(--bg) 100%);
-webkit-font-smoothing:antialiased;
-moz-osx-font-smoothing:grayscale;
}


.wrap{
min-height:100%;
display:flex;
align-items:center;
justify-content:center;
padding:28px;
box-sizing:border-box;
}


.card{
width:100%;
max-width:560px;
background:var(--card);
border-radius:var(--radius);
box-shadow:0 10px 30px rgba(16,24,40,0.08);
padding:28px;
box-sizing:border-box;
backdrop-filter: blur(6px);
border: 1px solid rgba(16,24,40,0.04);
}


h1{font-size:20px;margin:0 0 8px;color:#0f172a}
p.lead{margin:0 0 18px;color:var(--muted);font-size:14px}


form{display:flex;flex-direction:column;gap:18px}


.field{
display:flex;flex-direction:column;gap:8px;
}


label.question{
font-weight:600;color:#0f172a;font-size:14px;
}


/* 選項容器 */
.options{display:flex;gap:10px;flex-wrap:wrap}


.option{
display:inline-flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px solid rgba(16,24,40,0.06);background:var(--glass);cursor:pointer;user-select:none;transition:all .18s ease;
}


.option input{appearance:none;display:inline-block;width:18px;height:18px;border-radius:6px;border:2px solid rgba(16,24,40,0.12);background:transparent}
.option input:checked{background:var(--accent);border-color:var(--accent);box-shadow:0 0 0 4px rgba(0,87,184,0.08)}


.note{font-size:12px;color:var(--muted)}


.btn{
display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:10px;border:0;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;font-size:14px;transition:transform .12s ease;
}
.btn:active{transform:translateY(1px)}
.btn[disabled]{opacity:.6;cursor:default}


.status{display:flex;align-items:center;gap:10px;color:var(--muted)}


<script>

// ★ 你的 GAS 部署網址
const GAS_URL = "https://script.google.com/macros/s/AKfycbzCphcqbEMUOcioq-owF9Q5jbtHvYRCAvxOm3Qb3lZLJd8ULYcrrFWhwA_CmIibtHKm/exec";


document.addEventListener("DOMContentLoaded", async () => {
  await liff.init({ liffId: "2001230327-l7YbvL9o" });

  const profile = await liff.getProfile();
  const uid = profile.userId;

  // 將 UID 放進隱藏欄位
  document.getElementById("UID").value = uid;

  // ★ 檢查是否已填寫
  const res = await fetch(`${GAS_URL}?uid=${uid}&check=1`);
  const data = await res.json();

  document.getElementById("status").style.display = "none";

  if (data.filled) {
    document.getElementById("doneArea").style.display = "block";
  } else {
    document.getElementById("surveyArea").style.display = "block";
  }
});


// ★ 表單送出（POST）
document.getElementById("surveyForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const formData = new FormData(e.target);

  const res = await fetch(GAS_URL, {
    method: "POST",
    body: formData
  });

  const result = await res.json();

  if (result.status === "success") {
    document.getElementById("surveyArea").style.display = "none";
    document.getElementById("doneArea").innerHTML =
      "<h3>問卷已送出，感謝您的填寫！</h3>";
    document.getElementById("doneArea").style.display = "block";
  }
});

</script>

</body>
</html>
