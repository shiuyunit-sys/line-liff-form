<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>顧客滿意度問卷</title>
  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body style="font-family: sans-serif; text-align: center; padding-top: 60px;">
  <h2>請點選下方按鈕開始填寫問卷</h2>
  <button id="openForm" style="padding: 12px 20px; border-radius: 8px; background-color: #00c300; color: white; border: none; font-size: 16px;">填寫問卷</button>

  <script>
    const googleFormBase = "https://docs.google.com/forms/d/e/1uaBrA0VsiYlsIVS1xJI2luZH5O2aQ4IGnHGpSDTnEwo/viewform?usp=pp_url&entry.149646131=";

    liff.init({ liffId: "2008487393-pyy20Dlq" })
      .then(() => liff.getProfile())
      .then(profile => {
        const uid = profile.userId;
        const formUrl = googleFormBase + encodeURIComponent(uid);

        document.getElementById("openForm").onclick = () => {
          alert("按鈕被點擊"); // 測試用
          liff.openWindow({
            url: formUrl,
            external: true // 在外部瀏覽器開啟 Google Form
          });
        };
      })
      .catch(err => {
        alert("發生錯誤，請稍後再試：" + err);
      });
  </script>
</body>
</html>
